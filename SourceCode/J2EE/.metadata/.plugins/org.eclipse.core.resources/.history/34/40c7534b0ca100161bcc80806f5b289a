import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

public class BussinessLogicValidation 
{
   public void validateUid(HttpServletRequest request, HttpServletResponse response)
   {
	   long uid=0;
		try
		{
			HttpSession session=request.getSession();
			try
			{
				uid=Long.parseLong(request.getParameter("uid"));
			}
			catch(Exception e)
			{
				if(request.getParameter("uid").isEmpty())
				{
					session.setAttribute("valid", 3);
			    }
				else
				{
					session.setAttribute("valid", 4);	
				}
			}
			request.getRequestDispatcher("/patientreceiving.jsp").forward(request, response);
				
			if(uid < 0)
			{
				session.setAttribute("valid",5);
			}
			else if (uid==0) 
			{
					//uid is invalid
					session.setAttribute("valid", 0);
			}
			else if(uid > 9999999999L)
			{   
				session.setAttribute("valid",2);	
			}
			else 
			{
				// uid is valid 
				session.setAttribute("valid", 1);
				//registerDataOfApplication(request);
			}
			
			if(Integer.parseInt(session.getAttribute("valid").toString())!=1)
			{
				request.getRequestDispatcher("/patientreceiving.jsp").forward(request, response);
			}
		}
		catch (Exception e) 
		{
			System.out.println(e);
		}
   }
		
   public void validateFirstname(HttpServletRequest request, HttpServletResponse response)
   {
		String firstname;
		try
		{
			HttpSession session=request.getSession();
			firstname=request.getParameter("firstname");
			if(request.getParameter("firstname").isEmpty())
			{
					session.setAttribute("valid", 6);
			}	
			int asciinumber;
			for(int i=0;i<=firstname.length()-1;i++)
			{
				asciinumber=firstname.charAt(i);
				if(asciinumber>=97 && asciinumber<=122 || asciinumber>=65 && asciinumber<=90 || asciinumber==32)
				{
					session.setAttribute("valid",1);
					//registerDataOfApplication(request);
				}
				else
				{
					session.setAttribute("valid",7);
				}
			}
			if(firstname.length()>50)
			{
				session.setAttribute("valid",8 );
			}
			if(Integer.parseInt(session.getAttribute("valid").toString())!=1)
			{
				request.getRequestDispatcher("/patientreceiving.jsp").forward(request, response);
			}
		}
		catch (Exception e) 
		{
			System.out.println(e);
		}	
   }
   
   public void validateLastname(HttpServletRequest request, HttpServletResponse response) 
   {
	   String lastname;
		try
		{
			HttpSession session=request.getSession();
			lastname=request.getParameter("lastname");
			if(request.getParameter("lastname").isEmpty())
			{
					session.setAttribute("valid", 9);
			}	
			int asciinumber;
			for(int i=0;i<=lastname.length()-1;i++)
			{
				asciinumber=lastname.charAt(i);
				if(asciinumber>=97 && asciinumber<=122 || asciinumber>=65 && asciinumber<=90 || asciinumber==32)
				{
					session.setAttribute("valid",1);
					//registerDataOfApplication(request);
				}
				else
				{
					session.setAttribute("valid",10);
				}
			}
			if(lastname.length()>50)
			{
				session.setAttribute("valid",11 );
			}
			if(Integer.parseInt(session.getAttribute("valid").toString())!=1)
			{
				request.getRequestDispatcher("/patientreceiving.jsp").forward(request, response);
			}
		}
		catch (Exception e) 
		{
			System.out.println(e);
		}	
   
   }
   
   public void validateAge(HttpServletRequest request, HttpServletResponse response)
   {
	   long age=0;
	   try
		{
			HttpSession session=request.getSession();
			try
			{
				age=Long.parseLong(request.getParameter("age"));
			}
			catch(Exception e)
			{
				if(request.getParameter("age").isEmpty())
				{
					session.setAttribute("valid", 12);
				}
				else
				{
					session.setAttribute("valid", 13);
				}
				request.getRequestDispatcher("/patientreceiving.jsp").forward(request, response);
			}
			
			if(age < 0)
			{
				session.setAttribute("valid",14);
			}
			else if (age==0) 
			{
					//age is invalid
					session.setAttribute("valid", 15);
					
			}
			else if(age > 150)
			{   
				session.setAttribute("valid",16);	
			}
			else 
			{
				// age is valid 
				session.setAttribute("valid", 1);
				//registerDataOfApplication(request);
			}
			
			if(Integer.parseInt(session.getAttribute("valid").toString())!=1)
			{
				request.getRequestDispatcher("/patientreceiving.jsp").forward(request, response);
			}
		}
		catch (Exception e) 
		{
			System.out.println(e);
		}
	   
   }
   
   
   
   public void registerDataOfApplication(HttpServletRequest request) 
   {
	   DataAcessLogic data=new DataAcessLogic();
	   data.registerDataOfApplication(request);
   }
   
}
